
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manalytics - Interactive Metagame Analysis</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: #f5f7fa;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        .header h1 {
            margin: 0;
            font-size: 2.5em;
        }
        .header p {
            margin: 10px 0 0 0;
            opacity: 0.9;
        }
        .controls {
            margin-top: 20px;
        }
        .controls button {
            padding: 10px 20px;
            margin: 0 10px;
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }
        .controls button:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .stat-box {
            background: white;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }
        .stat-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            border-color: #667eea;
        }
        .stat-value {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }
        .stat-label {
            font-size: 0.9em;
            color: #7f8c8d;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        #mainChart, #tableChart {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        /* Table gradient styles */
        .gradient-row {
            position: relative;
            overflow: hidden;
        }
        .gradient-row::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            opacity: 0.3;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>🎯 Manalytics - Interactive Metagame Analysis</h1>
        <p>Hover for details • Export to PNG/SVG • MTG Color Gradients Preserved</p>
        
        <div class="controls">
            <button onclick="downloadCSV()">📊 Download CSV</button>
        </div>
    </div>
    
    <div class="container">
        <div class="stats">
            <div class="stat-box">
                <div class="stat-value">42</div>
                <div class="stat-label">Total Tournaments</div>
            </div>
            <div class="stat-box">
                <div class="stat-value">1140</div>
                <div class="stat-label">Total Decks</div>
            </div>
            <div class="stat-box">
                <div class="stat-value">9</div>
                <div class="stat-label">Archetypes > 1.5%</div>
            </div>
            <div class="stat-box">
                <div class="stat-value" style="font-size: 1.5em;">Izzet Cauldron</div>
                <div class="stat-label">Top Archetype</div>
            </div>
            <div class="stat-box">
                <div class="stat-value">Standard</div>
                <div class="stat-label">Format</div>
            </div>
            <div class="stat-box">
                <div class="stat-value" style="font-size: 1.2em;">2025-07-01 to 2025-07-25</div>
                <div class="stat-label">Date Range</div>
            </div>
        </div>
        
        <div id="mainChart"></div>
        <div id="tableChart"></div>
    </div>
    
    <script>
        var mainFig = {"data":[{"customdata":[19.56,19.39,4.65,4.39,3.6,3.33,1.75,1.75,1.58],"hole":0,"hovertemplate":"\u003cb\u003e%{label}\u003c\u002fb\u003e\u003cbr\u003eDecks: %{value}\u003cbr\u003eMeta Share: %{customdata}%\u003cbr\u003e\u003cextra\u003e\u003c\u002fextra\u003e","insidetextorientation":"radial","labels":["Izzet Cauldron","Dimir Midrange","Mono White Caretaker","Golgari Midrange","Boros Convoke","Mono Green Landfall","Gruul Aggro","Izzet Prowess","Naya Yuna"],"marker":{"colors":["#0E68AB","#0E68AB","#FFFBD5","#1C1C1C","#F44336","#4CAF50","#F44336","#0E68AB","#F44336"],"line":{"color":"white","width":2}},"text":["19.56%","19.39%","4.65%","4.39%","3.6%","3.33%","1.75%","1.75%","1.58%"],"textinfo":"label+text","textposition":"outside","values":[223,221,53,50,41,38,20,20,18],"type":"pie","domain":{"x":[0.0,0.4],"y":[0.625,1.0]}},{"hovertemplate":"\u003cb\u003e%{x}\u003c\u002fb\u003e\u003cbr\u003eDecks: %{y}\u003cbr\u003eMeta Share: %{text}\u003cextra\u003e\u003c\u002fextra\u003e","marker":{"color":["#0E68AB","#0E68AB","#FFFBD5","#1C1C1C","#F44336","#4CAF50","#F44336","#0E68AB","#F44336"],"line":{"color":"rgba(0,0,0,0.2)","width":1}},"showlegend":false,"text":["223 (19.56%)","221 (19.39%)","53 (4.65%)","50 (4.39%)","41 (3.6%)","38 (3.33%)","20 (1.75%)","20 (1.75%)","18 (1.58%)"],"textposition":"outside","x":["Izzet Cauldron","Dimir Midrange","Mono White Caretaker","Golgari Midrange","Boros Convoke","Mono Green Landfall","Gruul Aggro","Izzet Prowess","Naya Yuna"],"y":[223,221,53,50,41,38,20,20,18],"type":"bar","xaxis":"x","yaxis":"y"},{"hovertemplate":"\u003cb\u003e%{fullData.name}\u003c\u002fb\u003e\u003cbr\u003eDate: %{x}\u003cbr\u003eMeta Share: %{y:.1f}%\u003cbr\u003e\u003cextra\u003e\u003c\u002fextra\u003e","line":{"color":"#0E68AB","width":3},"marker":{"color":"#0E68AB","size":6},"mode":"lines+markers","name":"Izzet Cauldron","x":["2025-07-01","2025-07-03","2025-07-04","2025-07-05","2025-07-06","2025-07-07","2025-07-08","2025-07-10","2025-07-11","2025-07-12","2025-07-13","2025-07-14","2025-07-15","2025-07-17","2025-07-18","2025-07-19","2025-07-20","2025-07-21","2025-07-22","2025-07-24","2025-07-25"],"y":[9.09,3.12,4.69,12.5,6.04,21.88,20.59,21.88,26.04,18.84,13.11,31.25,22.86,31.25,36.49,28.75,27.5,40.62,35.29,18.75,31.25],"type":"scatter","xaxis":"x2","yaxis":"y2"},{"hovertemplate":"\u003cb\u003e%{fullData.name}\u003c\u002fb\u003e\u003cbr\u003eDate: %{x}\u003cbr\u003eMeta Share: %{y:.1f}%\u003cbr\u003e\u003cextra\u003e\u003c\u002fextra\u003e","line":{"color":"#0E68AB","width":3},"marker":{"color":"#0E68AB","size":6},"mode":"lines+markers","name":"Dimir Midrange","x":["2025-07-01","2025-07-02","2025-07-03","2025-07-04","2025-07-05","2025-07-06","2025-07-07","2025-07-08","2025-07-10","2025-07-11","2025-07-12","2025-07-13","2025-07-14","2025-07-15","2025-07-17","2025-07-18","2025-07-19","2025-07-20","2025-07-21","2025-07-22","2025-07-24","2025-07-25"],"y":[33.33,22.22,37.5,31.25,21.88,8.79,21.88,17.65,21.88,19.79,14.49,8.2,25.0,34.29,15.62,17.57,11.25,37.5,31.25,17.65,15.62,21.88],"type":"scatter","xaxis":"x2","yaxis":"y2"},{"hovertemplate":"\u003cb\u003e%{fullData.name}\u003c\u002fb\u003e\u003cbr\u003eDate: %{x}\u003cbr\u003eMeta Share: %{y:.1f}%\u003cbr\u003e\u003cextra\u003e\u003c\u002fextra\u003e","line":{"color":"#FFFBD5","width":3},"marker":{"color":"#FFFBD5","size":6},"mode":"lines+markers","name":"Mono White Caretaker","x":["2025-07-01","2025-07-03","2025-07-04","2025-07-05","2025-07-06","2025-07-07","2025-07-08","2025-07-10","2025-07-11","2025-07-12","2025-07-13","2025-07-14","2025-07-15","2025-07-17","2025-07-18","2025-07-19","2025-07-20","2025-07-24","2025-07-25"],"y":[12.12,15.62,12.5,10.94,2.2,3.12,2.94,3.12,4.17,4.35,3.28,3.12,5.71,3.12,4.05,2.5,5.0,3.12,3.12],"type":"scatter","xaxis":"x2","yaxis":"y2"},{"hovertemplate":"\u003cb\u003e%{fullData.name}\u003c\u002fb\u003e\u003cbr\u003eDate: %{x}\u003cbr\u003eMeta Share: %{y:.1f}%\u003cbr\u003e\u003cextra\u003e\u003c\u002fextra\u003e","line":{"color":"#1C1C1C","width":3},"marker":{"color":"#1C1C1C","size":6},"mode":"lines+markers","name":"Golgari Midrange","x":["2025-07-01","2025-07-03","2025-07-04","2025-07-06","2025-07-07","2025-07-08","2025-07-10","2025-07-11","2025-07-12","2025-07-13","2025-07-14","2025-07-17","2025-07-18","2025-07-19","2025-07-20","2025-07-22","2025-07-24","2025-07-25"],"y":[3.03,6.25,4.69,0.55,3.12,5.88,9.38,10.42,5.8,4.92,3.12,6.25,1.35,7.5,2.5,5.88,15.62,6.25],"type":"scatter","xaxis":"x2","yaxis":"y2"},{"hovertemplate":"\u003cb\u003e%{fullData.name}\u003c\u002fb\u003e\u003cbr\u003eDate: %{x}\u003cbr\u003eMeta Share: %{y:.1f}%\u003cbr\u003e\u003cextra\u003e\u003c\u002fextra\u003e","line":{"color":"#F44336","width":3},"marker":{"color":"#F44336","size":6},"mode":"lines+markers","name":"Boros Convoke","x":["2025-07-01","2025-07-04","2025-07-05","2025-07-06","2025-07-07","2025-07-08","2025-07-10","2025-07-11","2025-07-12","2025-07-13","2025-07-14","2025-07-15","2025-07-18","2025-07-19","2025-07-25"],"y":[3.03,4.69,3.12,2.2,3.12,11.76,6.25,6.25,5.8,4.92,12.5,8.57,1.35,2.5,3.12],"type":"scatter","xaxis":"x2","yaxis":"y2"}],"layout":{"template":{"data":{"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scattermap":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermap"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"#C8D4E3"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""},"bgcolor":"white","radialaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"yaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"zaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"baxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"bgcolor":"white","caxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.6000000000000001,1.0],"tickangle":-45,"showgrid":false},"yaxis":{"anchor":"x","domain":[0.625,1.0],"title":{"text":"Number of Decks"}},"xaxis2":{"anchor":"y2","domain":[0.0,1.0],"title":{"text":"Date"}},"yaxis2":{"anchor":"x2","domain":[0.0,0.375],"title":{"text":"Meta Share %"}},"annotations":[{"font":{"size":16},"showarrow":false,"text":"📊 Meta Distribution","x":0.2,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},{"font":{"size":16},"showarrow":false,"text":"📈 Top Archetypes","x":0.8,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},{"font":{"size":16},"showarrow":false,"text":"📉 Meta Evolution Timeline (Last 30 Days)","x":0.5,"xanchor":"center","xref":"paper","y":0.375,"yanchor":"bottom","yref":"paper"}],"title":{"font":{"size":24},"text":"🎯 Manalytics - Interactive Standard Metagame Analysis\u003cbr\u003e\u003csub\u003eTournaments Only (Leagues Excluded) - July 26, 2025\u003c\u002fsub\u003e","x":0.5,"xanchor":"center"},"margin":{"t":140,"b":80,"l":80,"r":120},"showlegend":true,"height":1100,"hovermode":"closest"}};
        var tableFig = {"data":[{"cells":{"align":"left","fill":{"color":[["rgba(14,104,171,0.27)","rgba(14,104,171,0.27)","rgba(255,251,213,0.13)","rgba(28,28,28,0.27)","rgba(244,67,54,0.27)","rgba(76,175,80,0.13)","rgba(244,67,54,0.27)","rgba(14,104,171,0.27)","rgba(244,67,54,0.27)"],["rgba(14,104,171,0.27)","rgba(14,104,171,0.27)","rgba(255,251,213,0.13)","rgba(28,28,28,0.27)","rgba(244,67,54,0.27)","rgba(76,175,80,0.13)","rgba(244,67,54,0.27)","rgba(14,104,171,0.27)","rgba(244,67,54,0.27)"],["rgba(14,104,171,0.27)","rgba(14,104,171,0.27)","rgba(255,251,213,0.13)","rgba(28,28,28,0.27)","rgba(244,67,54,0.27)","rgba(76,175,80,0.13)","rgba(244,67,54,0.27)","rgba(14,104,171,0.27)","rgba(244,67,54,0.27)"],["rgba(14,104,171,0.27)","rgba(14,104,171,0.27)","rgba(255,251,213,0.13)","rgba(28,28,28,0.27)","rgba(244,67,54,0.27)","rgba(76,175,80,0.13)","rgba(244,67,54,0.27)","rgba(14,104,171,0.27)","rgba(244,67,54,0.27)"],["rgba(14,104,171,0.27)","rgba(14,104,171,0.27)","rgba(255,251,213,0.13)","rgba(28,28,28,0.27)","rgba(244,67,54,0.27)","rgba(76,175,80,0.13)","rgba(244,67,54,0.27)","rgba(14,104,171,0.27)","rgba(244,67,54,0.27)"],["rgba(14,104,171,0.27)","rgba(14,104,171,0.27)","rgba(255,251,213,0.13)","rgba(28,28,28,0.27)","rgba(244,67,54,0.27)","rgba(76,175,80,0.13)","rgba(244,67,54,0.27)","rgba(14,104,171,0.27)","rgba(244,67,54,0.27)"]]},"font":{"size":12},"height":30,"values":[["#1","#2","#3","#4","#5","#6","#7","#8","#9"],["Izzet Cauldron","Dimir Midrange","Mono White Caretaker","Golgari Midrange","Boros Convoke","Mono Green Landfall","Gruul Aggro","Izzet Prowess","Naya Yuna"],[223,221,53,50,41,38,20,20,18],["19.56%","19.39%","4.65%","4.39%","3.60%","3.33%","1.75%","1.75%","1.58%"],[5.3,5.3,1.3,1.2,1.0,0.9,0.5,0.5,0.4],["📈 Rising","➡️ Stable","📉 Falling","📉 Falling","📉 Falling","📉 Falling","➡️ Stable","📉 Falling","📉 Falling"]]},"header":{"align":"left","fill":{"color":"rgba(102, 126, 234, 0.8)"},"font":{"color":"white","size":14},"height":40,"values":["Rank","Archetype","Decks","Meta %","Avg\u002fTournament","Trend"]},"type":"table"}],"layout":{"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"margin":{"t":60,"b":20,"l":20,"r":20},"title":{"text":"🏆 Complete Archetype Breakdown"},"height":600}};
        
        // Gradient info for visualizations
        var gradientInfo = [{"index": 0, "label": "Izzet Cauldron", "colors": ["U", "R"], "hex_colors": ["#0E68AB", "#F44336"]}, {"index": 1, "label": "Dimir Midrange", "colors": ["U", "B"], "hex_colors": ["#0E68AB", "#1C1C1C"]}, {"index": 3, "label": "Golgari Midrange", "colors": ["B", "G"], "hex_colors": ["#1C1C1C", "#4CAF50"]}, {"index": 4, "label": "Boros Convoke", "colors": ["R", "W"], "hex_colors": ["#F44336", "#FFFBD5"]}, {"index": 6, "label": "Gruul Aggro", "colors": ["R", "G"], "hex_colors": ["#F44336", "#4CAF50"]}, {"index": 7, "label": "Izzet Prowess", "colors": ["U", "R"], "hex_colors": ["#0E68AB", "#F44336"]}, {"index": 8, "label": "Naya Yuna", "colors": ["R", "G", "W"], "hex_colors": ["#F44336", "#4CAF50", "#FFFBD5"]}];
        
        // Table data with colors
        var tableColorData = [{"label": "Izzet Cauldron", "colors": ["U", "R"]}, {"label": "Dimir Midrange", "colors": ["U", "B"]}, {"label": "Mono White Caretaker", "colors": ["W"]}, {"label": "Golgari Midrange", "colors": ["B", "G"]}, {"label": "Boros Convoke", "colors": ["R", "W"]}, {"label": "Mono Green Landfall", "colors": ["G"]}, {"label": "Gruul Aggro", "colors": ["R", "G"]}, {"label": "Izzet Prowess", "colors": ["U", "R"]}, {"label": "Naya Yuna", "colors": ["R", "G", "W"]}];
        
        // MTG colors
        var mtgColors = {
            'W': '#FFFBD5',
            'U': '#0E68AB',
            'B': '#1C1C1C',
            'R': '#F44336',
            'G': '#4CAF50',
            'C': '#9E9E9E'
        };
        
        // Configuration pour désactiver les interactions qui cassent les gradients
        var config = {
            responsive: true,
            displayModeBar: true,
            modeBarButtonsToRemove: ['select2d', 'lasso2d', 'toggleSpikelines'],
            displaylogo: false
        };
        
        Plotly.newPlot('mainChart', mainFig.data, mainFig.layout, config).then(function(gd) {
            // Apply gradients to pie and bar charts
            setTimeout(function() {
                var svg = gd.querySelector('.main-svg');
                if (!svg) return;
                
                // Create defs for gradients
                var defs = svg.querySelector('defs') || svg.insertBefore(document.createElementNS('http://www.w3.org/2000/svg', 'defs'), svg.firstChild);
                
                // Add gradient definitions
                gradientInfo.forEach(function(info) {
                    // Radial gradient for pie
                    var radialGrad = document.createElementNS('http://www.w3.org/2000/svg', 'radialGradient');
                    radialGrad.setAttribute('id', 'pie_grad_' + info.index);
                    
                    info.hex_colors.forEach(function(color, i) {
                        var stop = document.createElementNS('http://www.w3.org/2000/svg', 'stop');
                        stop.setAttribute('offset', (i / (info.hex_colors.length - 1) * 100) + '%');
                        stop.setAttribute('stop-color', color);
                        radialGrad.appendChild(stop);
                    });
                    defs.appendChild(radialGrad);
                    
                    // Linear gradient for bars
                    var linearGrad = document.createElementNS('http://www.w3.org/2000/svg', 'linearGradient');
                    linearGrad.setAttribute('id', 'bar_grad_' + info.index);
                    linearGrad.setAttribute('x1', '0%');
                    linearGrad.setAttribute('y1', '100%');
                    linearGrad.setAttribute('x2', '0%');
                    linearGrad.setAttribute('y2', '0%');
                    
                    info.hex_colors.forEach(function(color, i) {
                        var stop = document.createElementNS('http://www.w3.org/2000/svg', 'stop');
                        stop.setAttribute('offset', (i / (info.hex_colors.length - 1) * 100) + '%');
                        stop.setAttribute('stop-color', color);
                        linearGrad.appendChild(stop);
                    });
                    defs.appendChild(linearGrad);
                });
                
                // Apply to pie slices
                var pieSlices = gd.querySelectorAll('.pielayer .slice path');
                gradientInfo.forEach(function(info) {
                    if (pieSlices[info.index]) {
                        pieSlices[info.index].style.fill = 'url(#pie_grad_' + info.index + ')';
                    }
                });
                
                // Apply to bars
                var bars = gd.querySelectorAll('.barlayer .points .point path');
                gradientInfo.forEach(function(info) {
                    if (bars[info.index]) {
                        bars[info.index].style.fill = 'url(#bar_grad_' + info.index + ')';
                    }
                });
            }, 200);
        });
        
        Plotly.newPlot('tableChart', tableFig.data, tableFig.layout, {responsive: true}).then(function(gd) {
            // Apply gradient backgrounds to table rows
            setTimeout(function() {
                // For each row with multi-color archetype, create CSS gradient
                var style = document.createElement('style');
                var css = '';
                
                tableColorData.forEach(function(data, i) {
                    if (data.colors.length > 1) {
                        var colors = data.colors.map(function(c) { return mtgColors[c]; });
                        css += `
                            .table-row-${i} {
                                background: linear-gradient(90deg, ${colors.join(', ')}) !important;
                            }
                        `;
                    }
                });
                
                style.textContent = css;
                document.head.appendChild(style);
                
                // Apply classes to SVG elements
                var cells = gd.querySelectorAll('.table .cells rect');
                var cellsPerRow = 6;
                
                cells.forEach(function(cell, idx) {
                    var rowIdx = Math.floor(idx / cellsPerRow);
                    var data = tableColorData[rowIdx];
                    
                    if (data && data.colors.length > 1) {
                        // For multi-color rows, create gradient overlay
                        var parent = cell.parentNode;
                        var rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                        rect.setAttribute('x', cell.getAttribute('x'));
                        rect.setAttribute('y', cell.getAttribute('y'));
                        rect.setAttribute('width', cell.getAttribute('width'));
                        rect.setAttribute('height', cell.getAttribute('height'));
                        
                        // Create gradient
                        var gradId = 'table_grad_' + rowIdx + '_' + idx;
                        var grad = document.createElementNS('http://www.w3.org/2000/svg', 'linearGradient');
                        grad.setAttribute('id', gradId);
                        grad.setAttribute('x1', '0%');
                        grad.setAttribute('x2', '100%');
                        
                        data.colors.forEach(function(c, i) {
                            var stop = document.createElementNS('http://www.w3.org/2000/svg', 'stop');
                            stop.setAttribute('offset', (i / (data.colors.length - 1) * 100) + '%');
                            stop.setAttribute('stop-color', mtgColors[c]);
                            stop.setAttribute('stop-opacity', '0.3');
                            grad.appendChild(stop);
                        });
                        
                        var svg = gd.querySelector('svg');
                        var defs = svg.querySelector('defs') || svg.insertBefore(document.createElementNS('http://www.w3.org/2000/svg', 'defs'), svg.firstChild);
                        defs.appendChild(grad);
                        
                        rect.setAttribute('fill', 'url(#' + gradId + ')');
                        parent.appendChild(rect);
                    }
                });
                
                console.log('Table gradients applied');
            }, 200);
        });
        
        
        function downloadCSV() {
            let csv = 'Rank,Archetype,Decks,Percentage,Per Tournament\n';
            [{"rank": 1, "name": "Izzet Cauldron", "count": 223, "percentage": 19.56, "per_tournament": 5.3}, {"rank": 2, "name": "Dimir Midrange", "count": 221, "percentage": 19.39, "per_tournament": 5.3}, {"rank": 3, "name": "Mono White Caretaker", "count": 53, "percentage": 4.65, "per_tournament": 1.3}, {"rank": 4, "name": "Golgari Midrange", "count": 50, "percentage": 4.39, "per_tournament": 1.2}, {"rank": 5, "name": "Boros Convoke", "count": 41, "percentage": 3.6, "per_tournament": 1.0}, {"rank": 6, "name": "Mono Green Landfall", "count": 38, "percentage": 3.33, "per_tournament": 0.9}, {"rank": 7, "name": "Gruul Aggro", "count": 20, "percentage": 1.75, "per_tournament": 0.5}, {"rank": 8, "name": "Izzet Prowess", "count": 20, "percentage": 1.75, "per_tournament": 0.5}, {"rank": 9, "name": "Naya Yuna", "count": 18, "percentage": 1.58, "per_tournament": 0.4}]
            .forEach(row => {
                csv += `${row.rank},"${row.name}",${row.count},${row.percentage}%,${row.per_tournament}\n`;
            });
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'manalytics_meta_' + new Date().toISOString().split('T')[0] + '.csv';
            a.click();
        }
        
    </script>
</body>
</html>
